{% extends "core/base.html" %}

{% block title %}Client Detail{% endblock %}

{% block content %}
<h2>{{ client.full_name }}</h2>

<div class="card mb-4">
    <div class="card-body">

        <!-- Profile photo -->
        {% if client.profile_photo %}
            <img src="{{ client.profile_photo.url }}" alt="{{ client.full_name }}" 
                 class="img-thumbnail mb-3" style="max-width:150px;">
        {% else %}
            <p><em>No profile photo uploaded.</em></p>
        {% endif %}

        <p><strong>Email:</strong> {{ client.email }}</p>
        <p><strong>Phone:</strong> {{ client.phone }}</p>
        <p><strong>Address:</strong> {{ client.address }}</p>
        <p><strong>City:</strong> {{ client.city }}</p>
        <p><strong>State:</strong> {{ client.state }}</p>
        <p><strong>Country:</strong> {{ client.country }}</p>
        <p><strong>Zip Code:</strong> {{ client.zip_code }}</p>
        <p><strong>Created At:</strong> {{ client.created_at|date:"M d, Y H:i" }}</p>
        <p><strong>Updated At:</strong> {{ client.updated_at|date:"M d, Y H:i" }}</p>

        <hr>
        <h4>Products</h4>
        <ul class="list-group">
            {% for product in client.products.all %}
                <li class="list-group-item">
                    <a href="{% url 'product_detail' client.pk product.pk %}">{{ product.product_name }}</a>
                </li>
            {% empty %}
                <li class="list-group-item">No products for this client.</li>
            {% endfor %}
        </ul>

        <hr>
        <a href="{% url 'client_edit' client.pk %}" class="btn btn-warning">✏️ Edit</a>
        <a href="{% url 'client_list' %}" class="btn btn-secondary">⬅️ Back to Clients</a>
        <a href="{% url 'client_delete' client.pk %}" class="btn btn-danger">🗑️ Delete</a>
    </div>
</div>
{% endblock %}

